<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Web Bitcoin Wallet</title>
    <link rel="stylesheet" href="css/style.css">
</head>
<body>
    <header>
        <h1>Web Bitcoin Wallet</h1>
        <div class="api-status">
            <p>API Status: <span id="status-message">Fetching...</span></p>
            <p>API Version: <span id="version-message">Fetching...</span></p>
        </div>
    </header>

    <main>
        <section id="wallet-actions">
            <h2>Manage Your Wallet</h2>
            <div class="action-group">
                <button id="create_wallet_btn">Create New Wallet</button>
            </div>
            <div class="action-group">
                <label for="mnemonic_input">Import Wallet with Mnemonic:</label>
                <input type="text" id="mnemonic_input" placeholder="Enter your 12-word mnemonic phrase">
                <button id="import_wallet_btn">Import Wallet</button>
                <p id="import_error_msg" class="error-message"></p>
            </div>
        </section>

        <section id="wallet_info_area" class="hidden">
            <h2>Wallet Details</h2>
            <div class="info-item">
                <strong>Mnemonic:</strong>
                <div id="mnemonic_display_container">
                    <span id="mnemonic_display"></span>
                    <button id="copy_mnemonic_btn" title="Copy Mnemonic">Copy</button>
                </div>
            </div>
            <div class="info-item">
                <strong>Address (P2PKH):</strong>
                <div id="wallet_address_container">
                    <span id="wallet_address"></span>
                    <button id="copy_address_btn" title="Copy Address">Copy</button>
                </div>
            </div>
            <div class="info-item">
                <strong>Balance:</strong> <span id="wallet_balance">N/A</span>
            </div>
            <div class="info-item">
                <strong>QR Code:</strong>
                <div id="qr_code_container">
                    <!-- QR code will be rendered here by JavaScript -->
                </div>
            </div>
        </section>

        <section id="send_bitcoin_area" class="hidden">
            <h2>Send Bitcoin</h2>
            <div class="action-group">
                <label for="recipient_address">Recipient Address:</label>
                <input type="text" id="recipient_address" placeholder="Enter recipient's Bitcoin address">
            </div>
            <div class="action-group">
                <label for="send_amount">Amount (BTC):</label>
                <input type="text" id="send_amount" placeholder="e.g., 0.001">
            </div>
            <div class="action-group">
                <label>Network Fees (Recommended):</label>
                <div id="fee_info">Loading fees...</div>
            </div>
            <div class="action-group">
                <label>Fee Priority:</label>
                <div id="fee_priority_selector" class="fee-options">
                    <input type="radio" id="fee_priority_high" name="fee_priority" value="fastestFee" checked>
                    <label for="fee_priority_high">High (<span id="fastestFee_val">...</span> sat/vB)</label><br>
                    <input type="radio" id="fee_priority_medium" name="fee_priority" value="halfHourFee">
                    <label for="fee_priority_medium">Medium (<span id="halfHourFee_val">...</span> sat/vB)</label><br>
                    <input type="radio" id="fee_priority_low" name="fee_priority" value="hourFee">
                    <label for="fee_priority_low">Low (<span id="hourFee_val">...</span> sat/vB)</label><br>
                    <input type="radio" id="fee_priority_custom" name="fee_priority" value="custom">
                    <label for="fee_priority_custom">Custom</label>
                </div>
            </div>
            <div class="action-group hidden" id="custom_fee_rate_group">
                <label for="custom_fee_rate">Custom Fee Rate (sat/vB):</label>
                <input type="text" id="custom_fee_rate" placeholder="e.g., 20">
            </div>
            <input type="hidden" id="fee_rate"> <!-- Old field, keep hidden for now or remove if fully unused -->

            <button id="send_tx_btn">Send Transaction</button>
            <p id="send_status_msg" class="message"></p> 
        </section>

        <section id="transaction_history_area" class="hidden">
            <h2>Transaction History</h2>
            <button id="refresh_history_btn">Refresh History</button>
            <p id="history_status_msg" class="message"></p>
            <div class="table-container">
                <table id="tx_history_table">
                    <thead>
                        <tr>
                            <th>Date</th>
                            <th>Type</th>
                            <th>Net Amount (sats)</th>
                            <th>Fee (sats)</th>
                            <th>Confirmations</th>
                            <th>TXID</th>
                        </tr>
                    </thead>
                    <tbody>
                        <!-- Transaction rows will be inserted here by JavaScript -->
                    </tbody>
                </table>
            </div>
        </section>

        <section id="inheritance_planning_area" class="hidden">
            <h2>Inheritance Planning</h2>
            <p class="feature-description">
                This feature helps you prepare information for a beneficiary. It does **not** automate any
                transfer of funds. The information generated should be stored securely and shared with your
                trusted beneficiary according to your own estate planning.
            </p>
            <div class="action-group">
                <label for="beneficiary_address">Beneficiary Bitcoin Address:</label>
                <input type="text" id="beneficiary_address" placeholder="Enter beneficiary's Bitcoin address">
            </div>
            <div class="action-group">
                <label for="intended_inactivity_period">Intended Inactivity Period (e.g., 1 year):</label>
                <input type="text" id="intended_inactivity_period" placeholder="e.g., 1 year, 6 months">
            </div>
            <div class="action-group">
                <label for="beneficiary_message">Message/Instructions for Beneficiary:</label>
                <textarea id="beneficiary_message" rows="4" placeholder="Enter any special instructions or messages for your beneficiary."></textarea>
            </div>
            <button id="save_inheritance_plan_btn">Save Inheritance Plan</button>
            <p id="inheritance_plan_status_msg" class="message"></p>
            
            <hr class="section-hr">

            <button id="prepare_inheritance_package_btn">Prepare Inheritance Information Package</button>
            <div id="inheritance_package_output_container" class="hidden">
                <h3>Inheritance Information Package:</h3>
                <pre id="inheritance_package_output"></pre>
                <button id="download_inheritance_package_btn">Download as .txt</button>
            </div>
        </section>

    </main>

    <footer>
        <p>Disclaimer: This wallet is for educational purposes only. Do not use with real funds on the main Bitcoin network.</p>
    </footer>

    <!-- BitcoinJS Libraries -->
    <script src="js/lib/bip39.browser.js"></script> 
    <script src="js/lib/bitcoinjs-lib.umd.js"></script>
    <!-- QR Code Library -->
    <script src="js/lib/qrcode.min.js"></script> 
    <!-- Main application script -->
    <script src="js/main.js"></script>
</body>
</html>
